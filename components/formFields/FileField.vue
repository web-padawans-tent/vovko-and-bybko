<script>
  export default {
    name: 'FileField',
    props: {
      id: { type: String, required: true },
      customClass: {
        type: [String, Array, Object],
        default: "",
      },
      modelValue: {
        type: File,
        default: null,
      },
    },
    methods: {
      handleFileChange(e) {
        const files = e.target.files;
        console.log('files:', files)
        const selectedFile = files.length > 0 ? files[0] : null;
        console.log('selectedFile:', selectedFile);
        
        this.$emit('update:modelValue', selectedFile);
      }
    }
  }
</script>

<template>
  <label :class="['form-file', customClass]">
      <input :id="id" class="form-file__input" type="file" name="file" @change="handleFileChange">
      <span class="form-file__btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
          <path d="M12.9254 4.02428C12.6624 4.28719 12.2366 4.28663 11.9743 4.02428C11.7114 3.76137 11.7114 3.33501 11.9737 3.07266L13.1989 1.84745C14.4304 0.616026 16.0535 0 17.6757 0C19.2983 0 20.9211 0.616027 22.1525 1.84745C23.384 3.07888 24 4.70199 24 6.32426C24 7.94682 23.384 9.56964 22.1525 10.8011L10.8011 22.1525C9.56964 23.384 7.94652 24 6.32426 24C4.7017 24 3.07888 23.384 1.84745 22.1525C0.616027 20.9211 0 19.298 0 17.6757C0 16.0532 0.616027 14.4304 1.84745 13.1989L7.93113 7.11526C7.96163 7.08476 7.994 7.05875 8.02811 7.03447C8.05109 7.00021 8.07841 6.96798 8.1089 6.93749C8.7976 6.24879 9.70587 5.90362 10.6128 5.90435C11.5205 5.90435 12.4275 6.24938 13.1162 6.93808C13.8049 7.62677 14.1493 8.53431 14.1499 9.44141C14.1499 10.3491 13.8054 11.2566 13.1167 11.9453L7.79491 17.2672C7.53201 17.5301 7.10564 17.5301 6.84273 17.2672C6.58041 17.0048 6.58039 16.5784 6.84329 16.3155L12.1651 10.9937C12.5915 10.5673 12.8047 10.0046 12.8047 9.44155C12.8047 8.87846 12.5915 8.31577 12.1651 7.88941C11.7388 7.46305 11.1761 7.24984 10.613 7.24985C10.0499 7.24986 9.48719 7.46305 9.06082 7.88941C9.03105 7.91918 8.99867 7.94664 8.96384 7.9702C8.94086 8.00445 8.91355 8.03668 8.88305 8.06718L2.79937 14.1509C1.83028 15.1199 1.3459 16.3987 1.34609 17.6768C1.34609 18.9548 1.83028 20.2336 2.79937 21.2027C3.76846 22.1718 5.04662 22.6567 6.32529 22.656C7.6033 22.656 8.88212 22.1718 9.85121 21.2027L21.2027 9.85121C22.1718 8.88212 22.6562 7.60341 22.656 6.32529C22.656 5.04728 22.1718 3.76846 21.2027 2.79937C20.2336 1.83028 18.9555 1.34535 17.6768 1.34609C16.3988 1.34609 15.1199 1.83028 14.1509 2.79937L12.9257 4.02458L12.9254 4.02428Z"></path>
        </svg>
      </span>
      <span class="form-file__text">{{ modelValue ? modelValue.name : 'Прикрепить файл' }}</span>
    </label>
</template>